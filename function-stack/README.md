# function-stack

## 目的

利用`Performance`查看函数调用栈的技巧

## 描述

![](https://p.ipic.vip/6hau7a.png)  

在调试未知的源码时，通过火焰图我们可以得知以下信息

- `init` 是所有函数的主入口，同理可知`fn1`是`fn2`和`fn3`的入口...

- 根据火焰图层级关系依次类推，得知`fn1`和`fn4`是通过`init`调用的，同时也能知道`fn1`和`fn4`是并行关系

- 水平方向看：`fn2`和`fn3`又是通过`fn1`调用的，通过水平方向的长度得知`fn1`的耗时区间等于`fn2`+`fn3`

- 垂直方向看：调用链路如下：

![](https://p.ipic.vip/878k3g.png)

## 实际应用

这是我们调试`React`源码时的`render`调用链路  

![](https://p.ipic.vip/wnuihc.png)

这是`React Fiber`最核心的三个大阶段的链路

![](https://p.ipic.vip/5t75z8.png)

通过以上方式，我们可以在尝试调试大型框架/脚本的源码时快速了解其关键调用链路，从而快速定位我们需要去源码中找哪些方法，在哪里打断点，等等操作。
